<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Restaurant Booking Admin Panel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 80%;
            margin: 20px auto;
        }
        h2 {
            margin-top: 30px;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #fff;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        form {
            background-color: #fff;
            padding: 15px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }
        label {
            margin-right: 10px;
        }
        input, button {
            padding: 8px;
            margin-top: 5px;
        }
        button {
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üéØ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤</h1>

        <!-- –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö -->
        <h2>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
        <table id="users-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ò–º—è</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h2>üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω—ã</h2>
        <table id="restaurants-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ê–¥—Ä–µ—Å</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h2>ü™ë –°—Ç–æ–ª–∏–∫–∏</h2>
        <table id="tables-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–†–µ—Å—Ç–æ—Ä–∞–Ω ID</th>
                    <th>–ú–µ—Å—Ç–∞</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h2>üìÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <table id="bookings-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID</th>
                    <th>–°—Ç–æ–ª–∏–∫ ID</th>
                    <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
        <form id="add-user-form">
            <label>–ò–º—è: <input type="text" name="name" required></label>
            <label>Email: <input type="email" name="email" required></label>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        </form>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ -->
        <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω</h2>
        <form id="add-restaurant-form">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ: <input type="text" name="name" required></label>
            <label>–ê–¥—Ä–µ—Å: <input type="text" name="address" required></label>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω</button>
        </form>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–ª–∏–∫–∞ -->
        <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–∏–∫</h2>
        <form id="add-table-form">
            <label>–†–µ—Å—Ç–æ—Ä–∞–Ω ID: <input type="number" name="restaurant_id" required></label>
            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç: <input type="number" name="seats" required></label>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–∏–∫</button>
        </form>

        <!-- –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <h2>‚ûï –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <form id="add-booking-form">
            <label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID: <input type="number" name="user_id" required></label>
            <label>–°—Ç–æ–ª–∏–∫ ID: <input type="number" name="table_id" required></label>
            <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: <input type="datetime-local" name="booking_time" required></label>
            <button type="submit">–°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
        </form>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        async function fetchData(endpoint, tableId) {
            const response = await fetch(`http://localhost:8080/api/${endpoint}`);
            const data = await response.json();
            const tableBody = document.querySelector(`#${tableId} tbody`);
            tableBody.innerHTML = '';
            
            data.forEach(item => {
                const row = document.createElement('tr');
                Object.values(item).forEach(value => {
                    const cell = document.createElement('td');
                    cell.innerText = value;
                    row.appendChild(cell);
                });
                tableBody.appendChild(row);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        async function submitForm(endpoint, formId) {
            const form = document.querySelector(`#${formId}`);
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                const response = await fetch(`http://localhost:8080/api/${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    alert(`${endpoint} –¥–æ–±–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!`);
                    fetchData(endpoint, `${endpoint}-table`);
                    form.reset();
                } else {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.');
                }
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            fetchData('users', 'users-table');
            fetchData('restaurants', 'restaurants-table');
            fetchData('tables', 'tables-table');
            fetchData('bookings', 'bookings-table');

            submitForm('users', 'add-user-form');
            submitForm('restaurants', 'add-restaurant-form');
            submitForm('tables', 'add-table-form');
            submitForm('bookings', 'add-booking-form');
        });
    </script>

</body>
</html>
